<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
</head>
<body>
    <center>
        <table id="col_test" class="table table-striped">
            <thead><b>Intl.Collator Test</b></thead>
            <tbody>
                <tr>
                    <td>result</td>
                    <td>test case</td>
                    <td>real</td>
                    <td>expect</td>
                </tr>
            </tbody>
        </table>
        <table id="date_test" class="table table-striped">
            <thead><b>Intl.DateTimeFormat Test</b></thead>
            <tbody>
                <tr>
                    <td>result</td>
                    <td>test case</td>
                    <td>real</td>
                    <td>expect</td>
                </tr>
            </tbody>
        </table>
        <table id="list_test" class="table table-striped">
            <thead><b>Intl.ListFormat Test</b></thead>
            <tbody>
                <tr>
                    <td>result</td>
                    <td>test case</td>
                    <td>real</td>
                    <td>expect</td>
                </tr>
            </tbody>
        </table>
        <table id="pr_test" class="table table-striped">
            <thead><b>Intl.PluralRules Test</b></thead>
            <tbody>
                <tr>
                    <td>result</td>
                    <td>test case</td>
                    <td>real</td>
                    <td>expect</td>
                </tr>
            </tbody>
        </table>
        <table id="rtf_test" class="table table-striped">
            <thead><b>Intl.RelativeTimeFormat Test</b></thead>
            <tbody>
                <tr>
                    <td>result</td>
                    <td>test case</td>
                    <td>real</td>
                    <td>expect</td>
                </tr>
            </tbody>
        </table>
    </center>

</body>
<script type="text/javascript">
        function insRow(id, test_res, name, intl_res, expect_res) {
            var x = document.getElementById(id).insertRow(-1);

            var col1 = x.insertCell(0);
            var col2 = x.insertCell(1);
            var col3 = x.insertCell(2);
            var col4 = x.insertCell(3);
            col1.innerHTML=test_res;
            col2.innerHTML=name;
            col3.innerHTML=intl_res;
            col4.innerHTML=expect_res;
        }

        function test(id, name, intl_res, expect_res){
            var test_res;
            if(intl_res == undefined){
                intl_res='undefined'
            }
            if(intl_res instanceof Array){
                console.log(intl_res)
                intl_res = intl_res.toString()
            }
            if (intl_res == expect_res){
                console.log('pass');
                test_res='√';
            }else{
                console.log('fail');
                test_res='×';
            }
            // console.log(intl_res, expect_res)
            // insRow(id, test_res, name, intl_res.toString(), expect_res.toString())
            insRow(id, test_res, name, intl_res, expect_res)
            
            
        }
    // Intl.Collator
    test("col_test","Intl.Collator().compare('a', 'c')", Intl.Collator().compare('a', 'c'), '-1');
    test("col_test","Intl.Collator('de').compare('ä', 'z')", Intl.Collator('de').compare('ä', 'z'), '-1');
    test("col_test","Intl.Collator('de', { sensitivity: 'base' }).compare('ä', 'a')", Intl.Collator('de', { sensitivity: 'base' }).compare('ä', 'a'), '0');
    const locales1 = ['ban', 'id-u-co-pinyin', 'de-ID'];
    const options1 = { localeMatcher: 'lookup' };
    test("col_test","Intl.Collator.supportedLocalesOf(locales1, options1)", Intl.Collator.supportedLocalesOf(locales1, options1), "id-u-co-pinyin,de-ID");

    // Intl.DateTimeFormat
    var date = new Date(Date.UTC(2012, 11, 20, 3, 0, 0));
    test("date_test","Intl.DateTimeFormat().format(date)", Intl.DateTimeFormat().format(date), '2012/12/20');
    test("date_test","Intl.DateTimeFormat('en-US').format(date)", Intl.DateTimeFormat('en-US').format(date), '12/20/2012');

    var options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
    test("date_test","Intl.DateTimeFormat('en-US', options).format(date)", Intl.DateTimeFormat('en-US', options).format(date), 'Thursday, December 20, 2012');

    var options2 = {calendar: 'chinese', numberingSystem: 'arab'};
    var dateFormat = new Intl.DateTimeFormat('default', options2);
    var usedOptions = dateFormat.resolvedOptions();
    test("date_test","usedOptions.calendar", usedOptions.calendar, 'gregory');


    test("date_test","usedOptions.numberingSystem", usedOptions.numberingSystem, 'latn');
    test("date_test","options.timeZone", options.timeZone, 'undefined');

    const options3 = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
    const startDate = new Date(Date.UTC(2007, 0, 10, 10, 0, 0));
    const endDate = new Date(Date.UTC(2008, 0, 10, 11, 0, 0));
    const dateTimeFormat = new Intl.DateTimeFormat('en', options3);
    test("date_test","dateTimeFormat.formatRange(startDate, endDate)", dateTimeFormat.formatRange(startDate, endDate), 'Wednesday, January 10, 2007 – Thursday, January 10, 2008');

    const locales2 = ['ban', 'id-u-co-pinyin', 'de-ID'];
    const options4 = { localeMatcher: 'lookup' };
    test("date_test", "Intl.DateTimeFormat.supportedLocalesOf(locales1, options3)", Intl.DateTimeFormat.supportedLocalesOf(locales1, options3), 'id-u-co-pinyin,de-ID');

    // List
    const vehicles = ['Motorcycle', 'Bus', 'Car'];
    const formatter = new Intl.ListFormat('en', { style: 'long', type: 'conjunction' });
    test("list_test", "formatter.format(vehicles)", formatter.format(vehicles), 'Motorcycle, Bus, and Car');

    //PluralRules
    var pr = new Intl.PluralRules();
    test('pr_test',"pr.select(0)",pr.select(0),'other');
    test('pr_test',"Intl.PluralRules('ar-EG').select(0)", new Intl.PluralRules('ar-EG').select(0),'zero');
    test('pr_test',"Intl.PluralRules('en-US', { type: 'ordinal' }).select(0)", new Intl.PluralRules('en-US', { type: 'ordinal' }).select(0),'other');
    
    //relative time
    const rtf1 = new Intl.RelativeTimeFormat('en');
    test("rtf_test", "rtf1.format(3, 'quarter')", rtf1.format(3, 'quarter'),'in 3 quarters');
    test("rtf_test", "rtf1.format(-1, 'day')", rtf1.format(-1, 'day'), '1 day ago');

    const rtf2 = new Intl.RelativeTimeFormat('es', { numeric: 'auto' });
    test("rtf_test", "rtf2.format(2, 'day')", rtf2.format(2, 'day'),'pasado mañana');

    const rtf = new Intl.RelativeTimeFormat("en", {
        localeMatcher: "best fit", // other values: "lookup"
        numeric: "always", // other values: "auto"
        style: "long", // other values: "short" or "narrow"
    });
    test("rtf_test", 'rtf.format(-1, "day")', rtf.format(-1, "day"), '1 day ago');
    test("rtf_test", 'Intl.RelativeTimeFormat("en", { numeric: "auto" }).format(-1, "day")', new Intl.RelativeTimeFormat("en", { numeric: "auto" }).format(-1, "day"), 'yesterday');
    test("rtf_test", 'Intl.RelativeTimeFormat("en", { numeric: "auto" }).formatToParts(-1, "day")', new Intl.RelativeTimeFormat("en", { numeric: "auto" }).formatToParts(-1, "day"),'[object Object]');

    </script>

</html>
    <script type="text/javascript">
     function co(){   
        var l111 = ['col_test', 'date_test', 'pr_test', 'rtf_test']
        // for (var i = 0, len=l111.length; i--) {
            // console.log(i)
        for(var i in l111){
            var table = document.getElementById(l111[i]);
            console.log(l111[i])
            var len = table.rows.length;
            var _row = table.rows;
            for(var i = 0;i < len;i++){
               var _cell = _row[i].cells;
               var d=_cell[0].innerHTML;
               console.log('color='+d)

               if(d == "×"){
                    table.rows[i].style.backgroundColor = "red";
                }
            }
        }
    }
    co()
    
    </script>
